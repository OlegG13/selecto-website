;(function($){

    // hero animation
    var options = {"particles":{"number":{"value":99,"density":{"enable":true,"value_area":552.4033491425909}},"color":{"value":"#ffffff"},"shape":{"type":"circle","stroke":{"width":0,"color":"#000000"},"polygon":{"nb_sides":3},"image":{"src":"img/github.svg","width":70,"height":100}},"opacity":{"value":1,"random":true,"anim":{"enable":false,"speed":1,"opacity_min":0.1,"sync":false}},"size":{"value":2,"random":true,"anim":{"enable":false,"speed":40,"size_min":0.1,"sync":false}},"line_linked":{"enable":false,"distance":150,"color":"#ffffff","opacity":0.4,"width":1},"move":{"enable":true,"speed":1.5782952832645452,"direction":"none","random":true,"straight":false,"out_mode":"out","bounce":false,"attract":{"enable":false,"rotateX":600,"rotateY":1200}}},"interactivity":{"detect_on":"canvas","events":{"onhover":{"enable":false,"mode":"repulse"},"onclick":{"enable":true,"mode":"repulse"},"resize":true},"modes":{"grab":{"distance":400,"line_linked":{"opacity":1}},"bubble":{"distance":400,"size":40,"duration":2,"opacity":8,"speed":3},"repulse":{"distance":200,"duration":0.4},"push":{"particles_nb":4},"remove":{"particles_nb":2}}},"retina_detect":false};
    if (document.getElementById("slide01") !== null) {
        particlesJS("slide01", options);
    }

})(jQuery);






var menu = (function () {

    var $menuFrame = $('.menu'),
        $menuBtn = $('[data-btn-mobile-menu]'),
        $menuTopLine = $menuBtn.find('.mobile-menu-btn__line--top'),
        $menuMidLine = $menuBtn.find('.mobile-menu-btn__line--mid'),
        $menuBotLine = $menuBtn.find('.mobile-menu-btn__line--bot'),
        $menuAllLine = $menuBtn.find('.mobile-menu-btn__line'),
        $header = $('.page__header'),
        $logo = $('.logo'),
        isOpen = false,
        screenWidth = 0;

    function screenW() {
        screenWidth = screen.width;
    }

    $( window ).on("resize", function() {
        screenW();
    }).resize();

    $(document).keyup(function(e) {
        if (e.keyCode == 27) {
            closeMenu();
        }
    });

    function openMenu() {
        _reverseStatus();
        $menuTopLine.addClass('mobile-menu-btn__line--top-active');
        $menuMidLine.addClass('mobile-menu-btn__line--mid-active');
        $menuBotLine.addClass('mobile-menu-btn__line--bot-active');
        $menuAllLine.removeClass('mobile-menu-btn__line--dark');
        $logo.addClass('logo--menu');
        $header.css("width", screenWidth).addClass('page__header--menu-open');
        $menuFrame.addClass('menu--open');
    }

    function closeMenu() {
        _reverseStatus();
        $menuTopLine.removeClass('mobile-menu-btn__line--top-active');
        $menuMidLine.removeClass('mobile-menu-btn__line--mid-active');
        $menuBotLine.removeClass('mobile-menu-btn__line--bot-active');
        $menuAllLine.addClass('mobile-menu-btn__line--dark');
        $logo.removeClass('logo--menu');
        $header.css("width", "auto").removeClass('page__header--menu-open');
        $menuFrame.removeClass('menu--open');
    }
    
    function _reverseStatus() {
        isOpen = !isOpen;
    }


    function _init() {
        if (isOpen === true) {
            closeMenu();
        } else {
            openMenu();
        }
    }

    $menuBtn.on('click', function () {
       _init();
    });

    return {
        open: openMenu,
        close: closeMenu
    }
})();
;(function() {

    var slide1 = document.getElementById("slide01");
    var slide2 = document.getElementById("slide02");
    var slide3 = document.getElementById("slide03");
    var slide4 = document.getElementById("slide04");
    var slide5 = document.getElementById("slide05");
    var slide6 = document.getElementById("slide06");
    var slide7 = document.getElementById("slide07");

    var headers = ["#slide01", "#slide02", "#slide03", "#slide04", "#slide05", "#slide06", "#slide07"];

    // init
    var controller = new ScrollMagic.Controller();

    // build tween
    //var tween = TweenMax.to("#target", 0.5, {backgroundColor: "black"});


    // function countFunc() {
    //     return demo.start();
    // };

    // SCENE 1
    // create scenes for each of the headers
    if (slide1 !== null || slide2 !== null || slide3 !== null || slide4 !== null || slide5 !== null || slide6 !== null || slide7 !== null) {
        headers.forEach(function (header, index) {

            // number for highlighting scenes
            var num = index+1;

            // make scene
            var headerScene = new ScrollMagic.Scene({
                triggerElement: header, // trigger CSS animation when header is in the middle of the viewport
                offset: -100 // offset triggers the animation 95px earlier than middle of the viewport, adjust to your liking
            })
                .setClassToggle('#slide0'+num, 'is-active') // set class to active slide
                //.addIndicators() // add indicators (requires plugin), use for debugging
                //.setTween(tween)
                //.setPin("#target")
                .on('start', function () {
                    if (num === 2) {
                        setTimeout(projectCount.start.bind(projectCount), 1000);
                        setTimeout(yearsCount.start.bind(yearsCount), 1300);
                        setTimeout(peopleCount.start.bind(peopleCount), 1600);
                        setTimeout(officesCount.start.bind(officesCount), 1900);
                    }
                })
                .addTo(controller);
        });
    }




})();
;(function($){

	$.slickSlider = {

		getCols: function(slide){
			var breakpoints = [768,992,1200];
			var cols = slide ? slide.split(',') : false;

			if($.isArray(cols)){
				cols.shift();
				if(cols.length > 0){
					return $.map(cols, function(value, index){
						return {
							breakpoint: breakpoints[index],
							settings: {
								slidesToShow: parseInt(value)
							}
						}
					});
				}else{
					return false;
				}	  
			}else{
				return false;
			}
		},
		getFirstCol: function(slide){
			var cols = slide ? slide.split(',') : false;
			if(cols){
				return parseInt(slide.split(',')[0]);
			}else{
				return 2;
			}
		}
	}
	
})(jQuery);
;(function () {

    var sliders = $('[data-slider="review"]');

    sliders.each(function () {

        var scope = $(this);
        var slides = $('[data-slider-slides]', scope).attr('data-slider-slides');

        $('[data-slider-slides]', scope).find('[data-slider-slide]').css('float', 'left').end().slick({
            dots: false,
            arrows: true,
            infinite: false,
            adaptiveHeight: false,
            slidesToShow: $.slickSlider.getFirstCol(slides),
            autoplay: false,
            autoplaySpeed: 3000,
            swipeToSlide: true,
            mobileFirst: true,
            rows: 1,
            prevArrow: $('[data-slider-arrow-left]', scope).removeClass('slider__arrow--hidden'),
            nextArrow: $('[data-slider-arrow-right]', scope).removeClass('slider__arrow--hidden'),
            responsive: $.slickSlider.getCols(slides)
        });

    });

})();
// var count = (function () {
//
//     var $counter = $('[data-count]');
//
//     function init() {
//         return $counter.each(function () {
//             console.log($(this))
//         })
//     }
//
//     return {
//         init: init
//     }
//
// })();



if (document.getElementById("projects") !== null) {
    var project = {
        useEasing : true,
        useGrouping : true,
        separator : ',',
        decimal : '.',
        count: 60,
        id: "projects"
    };
    var projectCount = new CountUp(project.id, 10, project.count, 0, 2.5, project);
}
if (document.getElementById("years") !== null) {
    var years = {
        useEasing: true,
        useGrouping: true,
        separator: ',',
        decimal: '.',
        count: 3,
        id: "years"
    };
    var yearsCount = new CountUp(years.id, 0, years.count, 0, 2.5, years);
}
if (document.getElementById("people") !== null) {
    var people = {
        useEasing: true,
        useGrouping: true,
        separator: ',',
        decimal: '.',
        count: 50,
        id: "people"
    };
    var peopleCount = new CountUp(people.id, 10, people.count, 0, 2.5, people);
}
if (document.getElementById("offices") !== null) {
    var offices = {
        useEasing: true,
        useGrouping: true,
        separator: ',',
        decimal: '.',
        count: 2,
        id: "offices"
    };
    var officesCount = new CountUp(offices.id, 0, offices.count, 0, 2.5, offices);
}
